<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Master - Free PDF Tools Online</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f8f9fa; }
        
        /* Header */
        .header { background: #fff; padding: 15px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.06); position: sticky; top: 0; z-index: 100; }
        .header-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { display: flex; align-items: center; gap: 10px; font-size: 24px; font-weight: 700; color: #d32f2f; text-decoration: none; }
        .logo i { font-size: 28px; }
        .nav-links { display: flex; gap: 30px; }
        .nav-links a { color: #5f6368; text-decoration: none; font-size: 15px; font-weight: 500; transition: color 0.2s; }
        .nav-links a:hover { color: #d32f2f; }
        
        /* Hero Section */
        .hero { background: linear-gradient(135deg, #d32f2f 0%, #c62828 100%); color: white; padding: 60px 20px; text-align: center; }
        .hero h1 { font-size: 42px; margin-bottom: 15px; font-weight: 700; }
        .hero p { font-size: 18px; opacity: 0.95; max-width: 600px; margin: 0 auto; }
        
        /* Tools Grid */
        .tools-section { max-width: 1200px; margin: 50px auto; padding: 0 20px; }
        .section-title { font-size: 28px; color: #202124; margin-bottom: 30px; font-weight: 600; }
        .tools-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-bottom: 50px; }
        .tool-card { background: white; border-radius: 12px; padding: 30px; text-align: center; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border: 2px solid transparent; }
        .tool-card:hover { transform: translateY(-5px); box-shadow: 0 8px 24px rgba(0,0,0,0.12); border-color: #d32f2f; }
        .tool-card i { font-size: 48px; color: #d32f2f; margin-bottom: 15px; display: block; }
        .tool-card h3 { color: #202124; font-size: 18px; margin-bottom: 10px; font-weight: 600; }
        .tool-card p { color: #5f6368; font-size: 14px; line-height: 1.5; }
        
        /* Editor Workspace */
        .editor-workspace { display: none; min-height: calc(100vh - 70px); }
        .editor-workspace.active { display: block; }
        
        /* Upload Area */
        .upload-container { max-width: 800px; margin: 80px auto; padding: 0 20px; }
        .upload-box { background: white; border: 3px dashed #dadce0; border-radius: 16px; padding: 80px 40px; text-align: center; cursor: pointer; transition: all 0.3s; }
        .upload-box:hover { border-color: #d32f2f; background: #fef7f7; }
        .upload-box i { font-size: 72px; color: #d32f2f; margin-bottom: 20px; }
        .upload-box h2 { font-size: 24px; color: #202124; margin-bottom: 10px; }
        .upload-box p { color: #5f6368; font-size: 16px; margin-bottom: 20px; }
        .upload-btn { background: #d32f2f; color: white; border: none; padding: 14px 32px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .upload-btn:hover { background: #c62828; transform: translateY(-2px); }
        .upload-box input { display: none; }
        
        /* Tool Tabs */
        .tool-tabs { background: white; border-bottom: 1px solid #dadce0; padding: 0 20px; overflow-x: auto; white-space: nowrap; }
        .tool-tabs-inner { max-width: 1200px; margin: 0 auto; display: flex; gap: 5px; }
        .tool-tab { padding: 15px 20px; color: #5f6368; font-size: 14px; font-weight: 500; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.2s; display: inline-flex; align-items: center; gap: 8px; }
        .tool-tab:hover { color: #d32f2f; background: #fef7f7; }
        .tool-tab.active { color: #d32f2f; border-bottom-color: #d32f2f; }
        .tool-tab i { font-size: 16px; }
        
        /* Editor Layout */
        .editor-layout { display: flex; max-width: 1400px; margin: 0 auto; padding: 20px; gap: 20px; }
        .thumbnail-strip { width: 200px; background: white; border-radius: 12px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .thumbnail { background: #f8f9fa; border: 2px solid #dadce0; border-radius: 8px; padding: 10px; margin-bottom: 10px; cursor: pointer; transition: all 0.2s; text-align: center; }
        .thumbnail:hover { border-color: #d32f2f; }
        .thumbnail.active { border-color: #d32f2f; background: #fef7f7; }
        .thumbnail canvas { width: 100%; border-radius: 4px; }
        .thumbnail-label { font-size: 12px; color: #5f6368; margin-top: 5px; }
        
        .preview-area { flex: 1; background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); display: flex; flex-direction: column; }
        .preview-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #dadce0; }
        .zoom-controls { display: flex; gap: 10px; align-items: center; }
        .zoom-btn { width: 36px; height: 36px; border: 1px solid #dadce0; border-radius: 6px; background: white; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .zoom-btn:hover { background: #f8f9fa; border-color: #d32f2f; color: #d32f2f; }
        .zoom-level { font-size: 14px; color: #5f6368; min-width: 60px; text-align: center; }
        .preview-canvas-wrapper { flex: 1; display: flex; align-items: center; justify-content: center; overflow: auto; }
        #previewCanvas { box-shadow: 0 4px 16px rgba(0,0,0,0.1); }
        
        .settings-panel { width: 320px; background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .settings-title { font-size: 18px; color: #202124; margin-bottom: 20px; font-weight: 600; }
        .setting-group { margin-bottom: 20px; }
        .setting-label { font-size: 14px; color: #5f6368; margin-bottom: 8px; font-weight: 500; }
        .setting-input { width: 100%; padding: 10px; border: 1px solid #dadce0; border-radius: 6px; font-size: 14px; }
        .setting-slider { width: 100%; }
        .setting-radio { display: flex; gap: 15px; margin-top: 8px; }
        .radio-option { display: flex; align-items: center; gap: 6px; cursor: pointer; }
        .radio-option input { cursor: pointer; }
        
        /* Action Footer */
        .action-footer { background: white; border-top: 1px solid #dadce0; padding: 20px; position: sticky; bottom: 0; }
        .action-footer-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .action-buttons { display: flex; gap: 10px; }
        .btn-primary { background: #d32f2f; color: white; border: none; padding: 12px 32px; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .btn-primary:hover { background: #c62828; transform: translateY(-2px); }
        .btn-secondary { background: white; color: #5f6368; border: 1px solid #dadce0; padding: 12px 24px; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .btn-secondary:hover { background: #f8f9fa; border-color: #d32f2f; color: #d32f2f; }
        .progress-bar { flex: 1; max-width: 400px; height: 8px; background: #e8eaed; border-radius: 4px; overflow: hidden; display: none; }
        .progress-bar.active { display: block; }
        .progress-fill { height: 100%; background: #d32f2f; transition: width 0.3s; }
        
        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: white; border-radius: 16px; padding: 40px; max-width: 500px; width: 90%; text-align: center; }
        .modal-icon { font-size: 64px; color: #34a853; margin-bottom: 20px; }
        .modal-icon.loading { color: #d32f2f; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .modal-title { font-size: 24px; color: #202124; margin-bottom: 10px; font-weight: 600; }
        .modal-text { color: #5f6368; font-size: 16px; margin-bottom: 30px; }
        .modal-actions { display: flex; gap: 10px; justify-content: center; }
        
        /* Toast */
        .toast { position: fixed; bottom: 20px; right: 20px; background: #323232; color: white; padding: 16px 24px; border-radius: 8px; box-shadow: 0 4px 16px rgba(0,0,0,0.2); display: none; z-index: 1001; }
        .toast.active { display: block; animation: slideIn 0.3s; }
        @keyframes slideIn { from { transform: translateX(400px); } to { transform: translateX(0); } }
        .toast.error { background: #d32f2f; }
        .toast.success { background: #34a853; }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 { font-size: 32px; }
            .tools-grid { grid-template-columns: 1fr; }
            .editor-layout { flex-direction: column; }
            .thumbnail-strip { width: 100%; display: flex; overflow-x: auto; }
            .thumbnail { min-width: 120px; margin-right: 10px; margin-bottom: 0; }
            .settings-panel { width: 100%; }
            .nav-links { display: none; }
        }
        
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <a href="#" class="logo" onclick="showHome()">
                <i class="fas fa-file-pdf"></i>
                <span>PDF Master</span>
            </a>
            <div class="nav-links">
                <a href="#tools">All Tools</a>
                <a href="#features">Features</a>
                <a href="#pricing">Pricing</a>
                <a href="#help">Help</a>
            </div>
        </div>
    </div>

    <!-- Home Section -->
    <div id="homeSection">
        <!-- Hero -->
        <div class="hero">
            <h1>Every tool you need to work with PDFs</h1>
            <p>Free online PDF tools to merge, split, compress, convert, rotate, unlock and watermark PDFs</p>
        </div>

        <!-- Tools Grid -->
        <div class="tools-section">
            <h2 class="section-title">All PDF Tools</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="openTool('merge')">
                    <i class="fas fa-object-group"></i>
                    <h3>Merge PDF</h3>
                    <p>Combine multiple PDFs into one document</p>
                </div>
                <div class="tool-card" onclick="openTool('split')">
                    <i class="fas fa-cut"></i>
                    <h3>Split PDF</h3>
                    <p>Separate one page or a whole set for easy conversion</p>
                </div>
                <div class="tool-card" onclick="openTool('compress')">
                    <i class="fas fa-compress-alt"></i>
                    <h3>Compress PDF</h3>
                    <p>Reduce file size while optimizing for quality</p>
                </div>
                <div class="tool-card" onclick="openTool('convert')">
                    <i class="fas fa-exchange-alt"></i>
                    <h3>PDF Converter</h3>
                    <p>Convert PDF to Word, Excel, PowerPoint, or JPG</p>
                </div>
                <div class="tool-card" onclick="openTool('edit')">
                    <i class="fas fa-edit"></i>
                    <h3>Edit PDF</h3>
                    <p>Add text, images, shapes or annotations to PDF</p>
                </div>
                <div class="tool-card" onclick="openTool('rotate')">
                    <i class="fas fa-redo"></i>
                    <h3>Rotate PDF</h3>
                    <p>Rotate your PDFs the way you need them</p>
                </div>
                <div class="tool-card" onclick="openTool('organize')">
                    <i class="fas fa-sort"></i>
                    <h3>Organize PDF</h3>
                    <p>Sort pages however you like</p>
                </div>
                <div class="tool-card" onclick="openTool('protect')">
                    <i class="fas fa-lock"></i>
                    <h3>Protect PDF</h3>
                    <p>Protect PDF files with a password</p>
                </div>
                <div class="tool-card" onclick="openTool('unlock')">
                    <i class="fas fa-unlock"></i>
                    <h3>Unlock PDF</h3>
                    <p>Remove PDF password security</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Editor Workspace -->
    <div id="editorWorkspace" class="editor-workspace">
        <!-- Upload Area -->
        <div id="uploadArea" class="upload-container">
            <div class="upload-box" onclick="document.getElementById('fileInput').click()">
                <i class="fas fa-cloud-upload-alt"></i>
                <h2>Select PDF file</h2>
                <p>or drop PDF here</p>
                <button class="upload-btn">Select PDF file</button>
                <input type="file" id="fileInput" accept=".pdf">
            </div>
        </div>

        <!-- Tool Tabs -->
        <div id="toolTabs" class="tool-tabs hidden">
            <div class="tool-tabs-inner">
                <div class="tool-tab active" onclick="switchTab('compress')">
                    <i class="fas fa-compress-alt"></i> Compress
                </div>
                <div class="tool-tab" onclick="switchTab('merge')">
                    <i class="fas fa-object-group"></i> Merge
                </div>
                <div class="tool-tab" onclick="switchTab('split')">
                    <i class="fas fa-cut"></i> Split
                </div>
                <div class="tool-tab" onclick="switchTab('rotate')">
                    <i class="fas fa-redo"></i> Rotate
                </div>
                <div class="tool-tab" onclick="switchTab('organize')">
                    <i class="fas fa-sort"></i> Organize
                </div>
                <div class="tool-tab" onclick="switchTab('convert')">
                    <i class="fas fa-exchange-alt"></i> Convert
                </div>
                <div class="tool-tab" onclick="switchTab('protect')">
                    <i class="fas fa-lock"></i> Protect
                </div>
            </div>
        </div>

        <!-- Editor Layout -->
        <div id="editorLayout" class="editor-layout hidden">
            <!-- Thumbnail Strip -->
            <div class="thumbnail-strip" id="thumbnailStrip">
                <!-- Thumbnails will be added here -->
            </div>

            <!-- Preview Area -->
            <div class="preview-area">
                <div class="preview-controls">
                    <div class="zoom-controls">
                        <button class="zoom-btn" onclick="zoomOut()">
                            <i class="fas fa-minus"></i>
                        </button>
                        <span class="zoom-level" id="zoomLevel">100%</span>
                        <button class="zoom-btn" onclick="zoomIn()">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div>
                        <span id="pageInfo">Page 1 of 1</span>
                    </div>
                </div>
                <div class="preview-canvas-wrapper">
                    <canvas id="previewCanvas"></canvas>
                </div>
            </div>

            <!-- Settings Panel -->
            <div class="settings-panel" id="settingsPanel">
                <div class="settings-title">Compress Settings</div>
                <div class="setting-group">
                    <div class="setting-label">Compression Level</div>
                    <input type="range" class="setting-slider" min="1" max="3" value="2" id="compressionLevel">
                    <div style="display: flex; justify-content: space-between; font-size: 12px; color: #5f6368; margin-top: 5px;">
                        <span>Low</span>
                        <span>Medium</span>
                        <span>High</span>
                    </div>
                </div>
                <div class="setting-group">
                    <div class="setting-label">Output Quality</div>
                    <div class="setting-radio">
                        <label class="radio-option">
                            <input type="radio" name="quality" value="high" checked>
                            <span>High</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="quality" value="medium">
                            <span>Medium</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="quality" value="low">
                            <span>Low</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Footer -->
        <div id="actionFooter" class="action-footer hidden">
            <div class="action-footer-content">
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <div class="action-buttons">
                    <button class="btn-secondary" onclick="resetEditor()">Cancel</button>
                    <button class="btn-primary" onclick="processFile()">
                        <i class="fas fa-check"></i> Apply Changes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div class="modal" id="loadingModal">
        <div class="modal-content">
            <i class="fas fa-spinner modal-icon loading"></i>
            <div class="modal-title">Processing your PDF...</div>
            <div class="modal-text">Please wait while we process your file</div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <i class="fas fa-check-circle modal-icon"></i>
            <div class="modal-title">Success!</div>
            <div class="modal-text">Your PDF has been processed successfully</div>
            <div class="modal-actions">
                <button class="btn-primary" onclick="downloadFile()">
                    <i class="fas fa-download"></i> Download
                </button>
                <button class="btn-secondary" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        
        let pdfDoc = null;
        let currentPage = 1;
        let scale = 1.5;
        let currentTool = 'compress';
        let originalPdfBytes = null;
        let processedPdfBytes = null;

        function showHome() {
            document.getElementById('homeSection').classList.remove('hidden');
            document.getElementById('editorWorkspace').classList.remove('active');
        }

        function openTool(tool) {
            currentTool = tool;
            document.getElementById('homeSection').classList.add('hidden');
            document.getElementById('editorWorkspace').classList.add('active');
        }

        document.getElementById('fileInput').addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;
            
            try {
                originalPdfBytes = await file.arrayBuffer();
                const loadingTask = pdfjsLib.getDocument({data: originalPdfBytes});
                pdfDoc = await loadingTask.promise;
                
                document.getElementById('uploadArea').classList.add('hidden');
                document.getElementById('toolTabs').classList.remove('hidden');
                document.getElementById('editorLayout').classList.remove('hidden');
                document.getElementById('actionFooter').classList.remove('hidden');
                
                await renderPage(1);
                await generateThumbnails();
                updatePageInfo();
                
                showToast('PDF loaded successfully!', 'success');
            } catch (error) {
                showToast('Error loading PDF: ' + error.message, 'error');
            }
        });

        async function renderPage(pageNum) {
            const page = await pdfDoc.getPage(pageNum);
            const viewport = page.getViewport({scale: scale});
            
            const canvas = document.getElementById('previewCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = viewport.width;
            canvas.height = viewport.height;
            
            await page.render({canvasContext: ctx, viewport: viewport}).promise;
            currentPage = pageNum;
        }

        async function generateThumbnails() {
            const strip = document.getElementById('thumbnailStrip');
            strip.innerHTML = '';
            
            for (let i = 1; i <= pdfDoc.numPages; i++) {
                const page = await pdfDoc.getPage(i);
                const viewport = page.getViewport({scale: 0.3});
                
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = viewport.width;
                canvas.height = viewport.height;
                
                await page.render({canvasContext: ctx, viewport: viewport}).promise;
                
                const thumb = document.createElement('div');
                thumb.className = 'thumbnail' + (i === 1 ? ' active' : '');
                thumb.onclick = () => selectPage(i);
                thumb.innerHTML = canvas.outerHTML + `<div class="thumbnail-label">Page ${i}</div>`;
                strip.appendChild(thumb);
            }
        }

        function selectPage(pageNum) {
            document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.thumbnail')[pageNum - 1].classList.add('active');
            renderPage(pageNum);
        }

        function switchTab(tab) {
            document.querySelectorAll('.tool-tab').forEach(t => t.classList.remove('active'));
            event.target.closest('.tool-tab').classList.add('active');
            currentTool = tab;
            updateSettingsPanel(tab);
        }

        function updateSettingsPanel(tool) {
            const panel = document.getElementById('settingsPanel');
            const titles = {
                compress: 'Compress Settings',
                merge: 'Merge Settings',
                split: 'Split Settings',
                rotate: 'Rotate Settings',
                organize: 'Organize Settings',
                convert: 'Convert Settings',
                protect: 'Protection Settings'
            };
            panel.querySelector('.settings-title').textContent = titles[tool] || 'Settings';
        }

        function zoomIn() {
            scale += 0.2;
            renderPage(currentPage);
            document.getElementById('zoomLevel').textContent = Math.round(scale * 100) + '%';
        }

        function zoomOut() {
            if (scale > 0.5) {
                scale -= 0.2;
                renderPage(currentPage);
                document.getElementById('zoomLevel').textContent = Math.round(scale * 100) + '%';
            }
        }

        function updatePageInfo() {
            document.getElementById('pageInfo').textContent = `Page ${currentPage} of ${pdfDoc.numPages}`;
        }

        async function processFile() {
            document.getElementById('loadingModal').classList.add('active');
            document.getElementById('progressBar').classList.add('active');
            
            // Simulate processing
            for (let i = 0; i <= 100; i += 10) {
                document.getElementById('progressFill').style.width = i + '%';
                await new Promise(resolve => setTimeout(resolve, 200));
            }
            
            try {
                const { PDFDocument } = PDFLib;
                const pdfDocLib = await PDFDocument.load(originalPdfBytes);
                processedPdfBytes = await pdfDocLib.save();
                
                document.getElementById('loadingModal').classList.remove('active');
                document.getElementById('successModal').classList.add('active');
                document.getElementById('progressBar').classList.remove('active');
            } catch (error) {
                document.getElementById('loadingModal').classList.remove('active');
                showToast('Error processing PDF: ' + error.message, 'error');
            }
        }

        function downloadFile() {
            const blob = new Blob([processedPdfBytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'processed.pdf';
            a.click();
            URL.revokeObjectURL(url);
            closeModal();
            showToast('File downloaded successfully!', 'success');
        }

        function closeModal() {
            document.getElementById('successModal').classList.remove('active');
        }

        function resetEditor() {
            if (confirm('Are you sure you want to cancel? All changes will be lost.')) {
                location.reload();
            }
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast ' + type + ' active';
            setTimeout(() => toast.classList.remove('active'), 3000);
        }
    </script>
</body>
</html>
