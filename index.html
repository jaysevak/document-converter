<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Master Pro - All-in-One PDF Toolkit</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --bg: #ffffff;
            --bg-secondary: #f8fafc;
            --text: #1e293b;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: rgba(0,0,0,0.1);
        }
        [data-theme="dark"] {
            --bg: #0f172a;
            --bg-secondary: #1e293b;
            --text: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #334155;
            --shadow: rgba(0,0,0,0.3);
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); transition: all 0.3s; }
        
        .header { background: var(--bg); border-bottom: 1px solid var(--border); padding: 15px 0; position: sticky; top: 0; z-index: 100; backdrop-filter: blur(10px); }
        .header-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 24px; font-weight: 700; background: linear-gradient(135deg, var(--primary) 0%, #8b5cf6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; display: flex; align-items: center; gap: 10px; }
        .logo i { background: linear-gradient(135deg, var(--primary) 0%, #8b5cf6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .header-actions { display: flex; gap: 15px; align-items: center; }
        .theme-toggle { width: 40px; height: 40px; border-radius: 50%; background: var(--bg-secondary); border: 1px solid var(--border); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s; }
        .theme-toggle:hover { transform: scale(1.1); }
        
        .hero { background: linear-gradient(135deg, var(--primary) 0%, #8b5cf6 100%); padding: 80px 20px; text-align: center; color: white; }
        .hero h1 { font-size: 48px; margin-bottom: 15px; font-weight: 700; }
        .hero p { font-size: 20px; opacity: 0.95; margin-bottom: 40px; }
        .trust-badges { display: flex; gap: 30px; justify-content: center; margin-top: 30px; }
        .badge { display: flex; align-items: center; gap: 8px; font-size: 14px; opacity: 0.9; }
        
        .upload-hero { max-width: 600px; margin: 0 auto; background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border-radius: 16px; padding: 40px; border: 2px dashed rgba(255,255,255,0.3); cursor: pointer; transition: all 0.3s; }
        .upload-hero:hover { background: rgba(255,255,255,0.2); transform: translateY(-5px); }
        .upload-hero i { font-size: 64px; margin-bottom: 20px; }
        .upload-hero input { display: none; }
        .btn-upload { background: white; color: var(--primary); padding: 14px 32px; border-radius: 8px; font-size: 16px; font-weight: 600; border: none; cursor: pointer; margin-top: 20px; }
        
        .tools-section { max-width: 1200px; margin: 60px auto; padding: 0 20px; }
        .category-title { font-size: 28px; margin-bottom: 30px; font-weight: 700; display: flex; align-items: center; gap: 12px; }
        .category-title i { color: var(--primary); }
        .tools-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-bottom: 60px; }
        .tool-card { background: var(--bg-secondary); border-radius: 16px; padding: 30px; cursor: pointer; transition: all 0.3s; border: 1px solid var(--border); }
        .tool-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px var(--shadow); border-color: var(--primary); }
        .tool-card i { font-size: 40px; color: var(--primary); margin-bottom: 15px; }
        .tool-card h3 { font-size: 18px; margin-bottom: 10px; font-weight: 600; }
        .tool-card p { color: var(--text-secondary); font-size: 14px; line-height: 1.6; }
        
        .workspace { display: none; min-height: 100vh; background: var(--bg-secondary); }
        .workspace.active { display: block; }
        .workspace-header { background: var(--bg); border-bottom: 1px solid var(--border); padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        .workspace-title { font-size: 20px; font-weight: 600; }
        .workspace-actions { display: flex; gap: 10px; }
        .btn { padding: 10px 24px; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; border: none; transition: all 0.2s; }
        .btn-primary { background: linear-gradient(135deg, var(--primary) 0%, #8b5cf6 100%); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 16px var(--shadow); }
        .btn-secondary { background: var(--bg-secondary); color: var(--text); border: 1px solid var(--border); }
        
        .workspace-content { display: flex; height: calc(100vh - 140px); }
        .sidebar { width: 250px; background: var(--bg); border-right: 1px solid var(--border); padding: 20px; overflow-y: auto; }
        .sidebar-title { font-size: 14px; font-weight: 600; color: var(--text-secondary); margin-bottom: 15px; text-transform: uppercase; }
        .thumbnail { background: var(--bg-secondary); border: 2px solid var(--border); border-radius: 8px; padding: 10px; margin-bottom: 10px; cursor: pointer; transition: all 0.2s; }
        .thumbnail:hover { border-color: var(--primary); }
        .thumbnail.active { border-color: var(--primary); background: rgba(99, 102, 241, 0.1); }
        .thumbnail canvas { width: 100%; border-radius: 4px; }
        
        .canvas-area { flex: 1; padding: 40px; overflow: auto; display: flex; align-items: center; justify-content: center; }
        .canvas-wrapper { background: white; box-shadow: 0 8px 32px var(--shadow); border-radius: 8px; }
        #previewCanvas { display: block; border-radius: 8px; }
        
        .settings-panel { width: 320px; background: var(--bg); border-left: 1px solid var(--border); padding: 20px; overflow-y: auto; }
        .settings-title { font-size: 18px; font-weight: 600; margin-bottom: 20px; }
        .setting-group { margin-bottom: 20px; }
        .setting-label { font-size: 14px; font-weight: 500; margin-bottom: 8px; color: var(--text-secondary); }
        .setting-input { width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-secondary); color: var(--text); font-size: 14px; }
        .setting-slider { width: 100%; height: 6px; border-radius: 3px; background: var(--border); outline: none; }
        
        .action-bar { background: var(--bg); border-top: 1px solid var(--border); padding: 20px; display: flex; justify-content: flex-end; gap: 10px; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal.active { display: flex; }
        .modal-content { background: var(--bg); border-radius: 16px; padding: 40px; max-width: 500px; text-align: center; box-shadow: 0 20px 60px var(--shadow); }
        .modal-icon { font-size: 64px; margin-bottom: 20px; }
        .modal-icon.loading { color: var(--primary); animation: spin 1s linear infinite; }
        .modal-icon.success { color: #10b981; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .modal-title { font-size: 24px; font-weight: 700; margin-bottom: 10px; }
        .modal-text { color: var(--text-secondary); margin-bottom: 30px; }
        
        .footer { background: var(--bg-secondary); padding: 40px 20px; text-align: center; border-top: 1px solid var(--border); }
        .footer p { color: var(--text-secondary); font-size: 14px; }
        
        @media (max-width: 768px) {
            .hero h1 { font-size: 32px; }
            .tools-grid { grid-template-columns: 1fr; }
            .workspace-content { flex-direction: column; }
            .sidebar, .settings-panel { width: 100%; border: none; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-file-pdf"></i>
                <span>PDF Master Pro</span>
            </div>
            <div class="header-actions">
                <button class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-moon" id="themeIcon"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="homepage">
        <div class="hero">
            <h1>All-in-One PDF Toolkit</h1>
            <p>Edit, convert, compress, and secure your PDFs with ease</p>
            
            <div class="upload-hero" onclick="document.getElementById('heroFileInput').click()">
                <i class="fas fa-cloud-upload-alt"></i>
                <h3 style="margin-bottom: 10px;">Drop your PDF here</h3>
                <p style="opacity: 0.8; margin-bottom: 0;">or click to browse</p>
                <button class="btn-upload">Select PDF</button>
                <input type="file" id="heroFileInput" accept=".pdf">
            </div>
            
            <div class="trust-badges">
                <div class="badge"><i class="fas fa-lock"></i> Secure & Private</div>
                <div class="badge"><i class="fas fa-bolt"></i> Lightning Fast</div>
                <div class="badge"><i class="fas fa-check-circle"></i> 100% Free</div>
            </div>
        </div>

        <div class="tools-section">
            <h2 class="category-title"><i class="fas fa-folder"></i> File Management</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="openTool('organize')">
                    <i class="fas fa-sort"></i>
                    <h3>Organize PDF</h3>
                    <p>Reorder, rotate, and delete pages with drag & drop</p>
                </div>
                <div class="tool-card" onclick="openTool('merge')">
                    <i class="fas fa-object-group"></i>
                    <h3>Merge PDF</h3>
                    <p>Combine multiple PDFs into one document</p>
                </div>
                <div class="tool-card" onclick="openTool('split')">
                    <i class="fas fa-cut"></i>
                    <h3>Split PDF</h3>
                    <p>Extract pages or split by range</p>
                </div>
                <div class="tool-card" onclick="openTool('compress')">
                    <i class="fas fa-compress-alt"></i>
                    <h3>Compress PDF</h3>
                    <p>Reduce file size with smart compression</p>
                </div>
                <div class="tool-card" onclick="openTool('optimize')">
                    <i class="fas fa-magic"></i>
                    <h3>Optimize PDF</h3>
                    <p>Clean metadata and optimize structure</p>
                </div>
                <div class="tool-card" onclick="openTool('repair')">
                    <i class="fas fa-wrench"></i>
                    <h3>Repair PDF</h3>
                    <p>Fix corrupted or damaged PDFs</p>
                </div>
                <div class="tool-card" onclick="openTool('ocr')">
                    <i class="fas fa-font"></i>
                    <h3>OCR PDF</h3>
                    <p>Extract text from scanned documents</p>
                </div>
            </div>

            <h2 class="category-title"><i class="fas fa-exchange-alt"></i> Convert to PDF</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="openTool('jpg-to-pdf')">
                    <i class="fas fa-image"></i>
                    <h3>JPG to PDF</h3>
                    <p>Convert images to PDF format</p>
                </div>
                <div class="tool-card" onclick="openTool('word-to-pdf')">
                    <i class="fab fa-microsoft"></i>
                    <h3>Word to PDF</h3>
                    <p>Convert DOCX files to PDF</p>
                </div>
                <div class="tool-card" onclick="openTool('ppt-to-pdf')">
                    <i class="fas fa-file-powerpoint"></i>
                    <h3>PowerPoint to PDF</h3>
                    <p>Convert presentations to PDF</p>
                </div>
                <div class="tool-card" onclick="openTool('excel-to-pdf')">
                    <i class="fas fa-file-excel"></i>
                    <h3>Excel to PDF</h3>
                    <p>Convert spreadsheets to PDF</p>
                </div>
            </div>

            <h2 class="category-title"><i class="fas fa-edit"></i> Edit PDF</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="window.location.href='pdf-editor-sejda.html'">
                    <i class="fas fa-pen"></i>
                    <h3>Edit PDF</h3>
                    <p>Add text, images, and shapes</p>
                </div>
                <div class="tool-card" onclick="openTool('rotate')">
                    <i class="fas fa-redo"></i>
                    <h3>Rotate PDF</h3>
                    <p>Rotate pages to correct orientation</p>
                </div>
                <div class="tool-card" onclick="openTool('watermark')">
                    <i class="fas fa-stamp"></i>
                    <h3>Add Watermark</h3>
                    <p>Add text or image watermarks</p>
                </div>
                <div class="tool-card" onclick="openTool('crop')">
                    <i class="fas fa-crop"></i>
                    <h3>Crop PDF</h3>
                    <p>Trim PDF margins and borders</p>
                </div>
            </div>

            <h2 class="category-title"><i class="fas fa-shield-alt"></i> Security</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="openTool('protect')">
                    <i class="fas fa-lock"></i>
                    <h3>Protect PDF</h3>
                    <p>Add password and permissions</p>
                </div>
                <div class="tool-card" onclick="openTool('unlock')">
                    <i class="fas fa-unlock"></i>
                    <h3>Unlock PDF</h3>
                    <p>Remove password protection</p>
                </div>
                <div class="tool-card" onclick="openTool('sign')">
                    <i class="fas fa-signature"></i>
                    <h3>Sign PDF</h3>
                    <p>Add digital signatures</p>
                </div>
                <div class="tool-card" onclick="openTool('redact')">
                    <i class="fas fa-eraser"></i>
                    <h3>Redact PDF</h3>
                    <p>Permanently remove sensitive content</p>
                </div>
            </div>

            <h2 class="category-title"><i class="fas fa-robot"></i> AI Tools</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="openTool('compare')">
                    <i class="fas fa-not-equal"></i>
                    <h3>Compare PDF</h3>
                    <p>Highlight differences between documents</p>
                </div>
                <div class="tool-card" onclick="openTool('translate')">
                    <i class="fas fa-language"></i>
                    <h3>Translate PDF</h3>
                    <p>Auto-translate to any language</p>
                </div>
                <div class="tool-card" onclick="openTool('intelligence')">
                    <i class="fas fa-brain"></i>
                    <h3>PDF Intelligence</h3>
                    <p>AI summary and data extraction</p>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>Â© 2026 PDF Master Pro - All processing happens securely in your browser</p>
            <p style="margin-top: 10px;">Files are automatically deleted after 2 hours</p>
        </div>
    </div>

    <div id="workspace" class="workspace">
        <div class="workspace-header">
            <div class="workspace-title" id="workspaceTitle">Processing PDF</div>
            <div class="workspace-actions">
                <button class="btn btn-secondary" onclick="closeWorkspace()">Cancel</button>
                <button class="btn btn-primary" onclick="processPDF()">Apply Changes</button>
            </div>
        </div>
        <div class="workspace-content">
            <div class="sidebar">
                <div class="sidebar-title">Pages</div>
                <div id="thumbnailContainer"></div>
            </div>
            <div class="canvas-area">
                <div class="canvas-wrapper">
                    <canvas id="previewCanvas"></canvas>
                </div>
            </div>
            <div class="settings-panel">
                <div class="settings-title" id="settingsTitle">Settings</div>
                <div id="settingsContent"></div>
            </div>
        </div>
        <div class="action-bar">
            <button class="btn btn-secondary" onclick="closeWorkspace()">Cancel</button>
            <button class="btn btn-primary" onclick="processPDF()">
                <i class="fas fa-check"></i> Apply Changes
            </button>
        </div>
    </div>

    <div class="modal" id="loadingModal">
        <div class="modal-content">
            <i class="fas fa-spinner modal-icon loading"></i>
            <div class="modal-title">Processing...</div>
            <div class="modal-text">Please wait while we process your PDF</div>
        </div>
    </div>

    <div class="modal" id="successModal">
        <div class="modal-content">
            <i class="fas fa-check-circle modal-icon success"></i>
            <div class="modal-title">Success!</div>
            <div class="modal-text">Your PDF has been processed successfully</div>
            <button class="btn btn-primary" onclick="downloadPDF()">
                <i class="fas fa-download"></i> Download PDF
            </button>
        </div>
    </div>

    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        
        let currentTool = '';
        let pdfDoc = null;
        let currentPage = 1;
        let scale = 1.5;
        let originalPdfBytes = null;
        let processedPdfBytes = null;

        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            document.getElementById('themeIcon').className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        }

        function openTool(tool) {
            currentTool = tool;
            document.getElementById('homepage').style.display = 'none';
            document.getElementById('workspace').classList.add('active');
            document.getElementById('workspaceTitle').textContent = tool.replace('-', ' ').toUpperCase();
            updateSettings(tool);
        }

        function closeWorkspace() {
            document.getElementById('workspace').classList.remove('active');
            document.getElementById('homepage').style.display = 'block';
        }

        function updateSettings(tool) {
            const settings = {
                compress: '<div class="setting-group"><div class="setting-label">Compression Level</div><input type="range" class="setting-slider" min="1" max="3" value="2"><div style="display:flex;justify-content:space-between;font-size:12px;color:var(--text-secondary);margin-top:5px;"><span>Low</span><span>Medium</span><span>High</span></div></div>',
                protect: '<div class="setting-group"><div class="setting-label">Password</div><input type="password" class="setting-input" placeholder="Enter password"></div>',
                watermark: '<div class="setting-group"><div class="setting-label">Watermark Text</div><input type="text" class="setting-input" placeholder="Enter text"></div><div class="setting-group"><div class="setting-label">Opacity</div><input type="range" class="setting-slider" min="0" max="100" value="50"></div>'
            };
            document.getElementById('settingsContent').innerHTML = settings[tool] || '<p style="color:var(--text-secondary);">Upload a PDF to get started</p>';
        }

        document.getElementById('heroFileInput').addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;
            
            try {
                const fileBuffer = await file.arrayBuffer();
                originalPdfBytes = fileBuffer.slice(0);
                const loadingTask = pdfjsLib.getDocument({data: new Uint8Array(originalPdfBytes)});
                pdfDoc = await loadingTask.promise;
                
                await renderPage(1);
                await generateThumbnails();
            } catch (error) {
                alert('Error loading PDF: ' + error.message);
            }
        });

        async function renderPage(pageNum) {
            const page = await pdfDoc.getPage(pageNum);
            const viewport = page.getViewport({scale: scale});
            
            const canvas = document.getElementById('previewCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = viewport.width;
            canvas.height = viewport.height;
            
            await page.render({canvasContext: ctx, viewport: viewport}).promise;
            currentPage = pageNum;
        }

        async function generateThumbnails() {
            const container = document.getElementById('thumbnailContainer');
            container.innerHTML = '';
            
            for (let i = 1; i <= Math.min(pdfDoc.numPages, 10); i++) {
                const page = await pdfDoc.getPage(i);
                const viewport = page.getViewport({scale: 0.3});
                
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = viewport.width;
                canvas.height = viewport.height;
                
                await page.render({canvasContext: ctx, viewport: viewport}).promise;
                
                const thumb = document.createElement('div');
                thumb.className = 'thumbnail' + (i === 1 ? ' active' : '');
                thumb.onclick = () => renderPage(i);
                thumb.appendChild(canvas);
                container.appendChild(thumb);
            }
        }

        async function processPDF() {
            document.getElementById('loadingModal').classList.add('active');
            
            try {
                const { PDFDocument } = PDFLib;
                const pdfDocLib = await PDFDocument.load(new Uint8Array(originalPdfBytes));
                
                if (currentTool === 'compress') {
                    pdfDocLib.setTitle('');
                    pdfDocLib.setAuthor('');
                }
                
                processedPdfBytes = await pdfDocLib.save();
                
                document.getElementById('loadingModal').classList.remove('active');
                document.getElementById('successModal').classList.add('active');
            } catch (error) {
                document.getElementById('loadingModal').classList.remove('active');
                alert('Error processing PDF: ' + error.message);
            }
        }

        function downloadPDF() {
            const blob = new Blob([processedPdfBytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${currentTool}-output.pdf`;
            a.click();
            URL.revokeObjectURL(url);
            document.getElementById('successModal').classList.remove('active');
            closeWorkspace();
        }
    </script>
</body>
</html>
