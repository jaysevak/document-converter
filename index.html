<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Master - Free Online PDF Tools</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f8f9fa; }
        
        .header { background: #fff; padding: 15px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.06); position: sticky; top: 0; z-index: 100; }
        .header-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { display: flex; align-items: center; gap: 10px; font-size: 24px; font-weight: 700; color: #d32f2f; text-decoration: none; cursor: pointer; }
        .logo i { font-size: 28px; }
        .nav-links { display: flex; gap: 30px; }
        .nav-links a { color: #5f6368; text-decoration: none; font-size: 15px; font-weight: 500; }
        
        .hero { background: linear-gradient(135deg, #d32f2f 0%, #c62828 100%); color: white; padding: 60px 20px; text-align: center; }
        .hero h1 { font-size: 42px; margin-bottom: 15px; font-weight: 700; }
        .hero p { font-size: 18px; opacity: 0.95; }
        
        .tools-section { max-width: 1200px; margin: 50px auto; padding: 0 20px; }
        .section-title { font-size: 28px; color: #202124; margin-bottom: 30px; font-weight: 600; }
        .tools-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-bottom: 50px; }
        .tool-card { background: white; border-radius: 12px; padding: 30px; text-align: center; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .tool-card:hover { transform: translateY(-5px); box-shadow: 0 8px 24px rgba(0,0,0,0.12); }
        .tool-card i { font-size: 48px; color: #d32f2f; margin-bottom: 15px; }
        .tool-card h3 { color: #202124; font-size: 18px; margin-bottom: 10px; }
        .tool-card p { color: #5f6368; font-size: 14px; }
        
        .workspace { display: none; min-height: calc(100vh - 70px); }
        .workspace.active { display: block; }
        .upload-container { max-width: 800px; margin: 80px auto; padding: 0 20px; }
        .upload-box { background: white; border: 3px dashed #dadce0; border-radius: 16px; padding: 80px 40px; text-align: center; cursor: pointer; }
        .upload-box:hover { border-color: #d32f2f; background: #fef7f7; }
        .upload-box i { font-size: 72px; color: #d32f2f; margin-bottom: 20px; }
        .upload-box h2 { font-size: 24px; color: #202124; margin-bottom: 10px; }
        .upload-box input { display: none; }
        .upload-btn { background: #d32f2f; color: white; border: none; padding: 14px 32px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; }
        
        .editor-layout { display: none; max-width: 1400px; margin: 20px auto; padding: 20px; gap: 20px; }
        .editor-layout.active { display: flex; }
        .thumbnail-strip { width: 200px; background: white; border-radius: 12px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .thumbnail { background: #f8f9fa; border: 2px solid #dadce0; border-radius: 8px; padding: 10px; margin-bottom: 10px; cursor: pointer; }
        .thumbnail.active { border-color: #d32f2f; }
        .thumbnail canvas { width: 100%; }
        
        .preview-area { flex: 1; background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .preview-controls { display: flex; justify-content: space-between; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #dadce0; }
        .zoom-btn { width: 36px; height: 36px; border: 1px solid #dadce0; border-radius: 6px; background: white; cursor: pointer; }
        #previewCanvas { box-shadow: 0 4px 16px rgba(0,0,0,0.1); }
        
        .settings-panel { width: 320px; background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .settings-title { font-size: 18px; color: #202124; margin-bottom: 20px; font-weight: 600; }
        .setting-group { margin-bottom: 20px; }
        .setting-label { font-size: 14px; color: #5f6368; margin-bottom: 8px; }
        .setting-input { width: 100%; padding: 10px; border: 1px solid #dadce0; border-radius: 6px; }
        
        .action-footer { background: white; border-top: 1px solid #dadce0; padding: 20px; position: sticky; bottom: 0; }
        .action-footer-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: flex-end; gap: 10px; }
        .btn-primary { background: #d32f2f; color: white; border: none; padding: 12px 32px; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; }
        .btn-secondary { background: white; color: #5f6368; border: 1px solid #dadce0; padding: 12px 24px; border-radius: 8px; font-size: 15px; cursor: pointer; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: white; border-radius: 16px; padding: 40px; max-width: 500px; text-align: center; }
        .modal-icon { font-size: 64px; margin-bottom: 20px; }
        .modal-icon.loading { color: #d32f2f; animation: spin 1s linear infinite; }
        .modal-icon.success { color: #34a853; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .modal-title { font-size: 24px; color: #202124; margin-bottom: 10px; }
        
        .hidden { display: none !important; }
        
        @media (max-width: 768px) {
            .tools-grid { grid-template-columns: 1fr; }
            .editor-layout { flex-direction: column; }
            .thumbnail-strip, .settings-panel { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo" onclick="showHome()">
                <i class="fas fa-file-pdf"></i>
                <span>PDF Master</span>
            </div>
            <div class="nav-links">
                <a href="#tools">All Tools</a>
                <a href="#pricing">Pricing</a>
                <a href="#api">API</a>
            </div>
        </div>
    </div>

    <div id="homeSection">
        <div class="hero">
            <h1>Every tool you need to work with PDFs</h1>
            <p>Free online PDF tools - 100% secure and easy to use</p>
        </div>

        <div class="tools-section">
            <h2 class="section-title">Organize PDF</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="openTool('merge')">
                    <i class="fas fa-object-group"></i>
                    <h3>Merge PDF</h3>
                    <p>Combine multiple PDFs into one</p>
                </div>
                <div class="tool-card" onclick="openTool('split')">
                    <i class="fas fa-cut"></i>
                    <h3>Split PDF</h3>
                    <p>Separate pages into individual files</p>
                </div>
                <div class="tool-card" onclick="openTool('organize')">
                    <i class="fas fa-sort"></i>
                    <h3>Organize PDF</h3>
                    <p>Reorder, rotate, and delete pages</p>
                </div>
                <div class="tool-card" onclick="openTool('remove')">
                    <i class="fas fa-trash-alt"></i>
                    <h3>Remove Pages</h3>
                    <p>Delete unwanted pages from PDF</p>
                </div>
                <div class="tool-card" onclick="openTool('extract')">
                    <i class="fas fa-file-export"></i>
                    <h3>Extract Pages</h3>
                    <p>Extract specific pages to new PDF</p>
                </div>
            </div>

            <h2 class="section-title">Optimize PDF</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="openTool('compress')">
                    <i class="fas fa-compress-alt"></i>
                    <h3>Compress PDF</h3>
                    <p>Reduce file size while optimizing quality</p>
                </div>
                <div class="tool-card" onclick="openTool('optimize')">
                    <i class="fas fa-magic"></i>
                    <h3>Optimize PDF</h3>
                    <p>Reduce size without quality loss</p>
                </div>
                <div class="tool-card" onclick="openTool('repair')">
                    <i class="fas fa-wrench"></i>
                    <h3>Repair PDF</h3>
                    <p>Fix corrupted PDF files</p>
                </div>
                <div class="tool-card" onclick="openTool('ocr')">
                    <i class="fas fa-font"></i>
                    <h3>OCR PDF</h3>
                    <p>Convert scanned images to text</p>
                </div>
            </div>

            <h2 class="section-title">Convert to PDF</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="openTool('jpg-to-pdf')">
                    <i class="fas fa-image"></i>
                    <h3>JPG to PDF</h3>
                    <p>Convert images to PDF</p>
                </div>
                <div class="tool-card" onclick="openTool('word-to-pdf')">
                    <i class="fab fa-microsoft"></i>
                    <h3>Word to PDF</h3>
                    <p>Convert DOCX to PDF</p>
                </div>
                <div class="tool-card" onclick="openTool('ppt-to-pdf')">
                    <i class="fas fa-file-powerpoint"></i>
                    <h3>PowerPoint to PDF</h3>
                    <p>Convert PPTX to PDF</p>
                </div>
                <div class="tool-card" onclick="openTool('excel-to-pdf')">
                    <i class="fas fa-file-excel"></i>
                    <h3>Excel to PDF</h3>
                    <p>Convert XLSX to PDF</p>
                </div>
                <div class="tool-card" onclick="openTool('html-to-pdf')">
                    <i class="fas fa-code"></i>
                    <h3>HTML to PDF</h3>
                    <p>Convert web pages to PDF</p>
                </div>
            </div>

            <h2 class="section-title">Convert from PDF</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="openTool('pdf-to-jpg')">
                    <i class="fas fa-images"></i>
                    <h3>PDF to JPG</h3>
                    <p>Convert PDF pages to images</p>
                </div>
                <div class="tool-card" onclick="openTool('pdf-to-word')">
                    <i class="fab fa-microsoft"></i>
                    <h3>PDF to Word</h3>
                    <p>Convert PDF to editable DOCX</p>
                </div>
                <div class="tool-card" onclick="openTool('pdf-to-ppt')">
                    <i class="fas fa-file-powerpoint"></i>
                    <h3>PDF to PowerPoint</h3>
                    <p>Convert PDF to PPTX</p>
                </div>
                <div class="tool-card" onclick="openTool('pdf-to-excel')">
                    <i class="fas fa-file-excel"></i>
                    <h3>PDF to Excel</h3>
                    <p>Extract tables to XLSX</p>
                </div>
            </div>

            <h2 class="section-title">Edit PDF</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="openTool('edit')">
                    <i class="fas fa-edit"></i>
                    <h3>Edit PDF</h3>
                    <p>Add text, images, and shapes</p>
                </div>
                <div class="tool-card" onclick="openTool('rotate')">
                    <i class="fas fa-redo"></i>
                    <h3>Rotate PDF</h3>
                    <p>Rotate pages to correct orientation</p>
                </div>
                <div class="tool-card" onclick="openTool('page-numbers')">
                    <i class="fas fa-list-ol"></i>
                    <h3>Add Page Numbers</h3>
                    <p>Number your PDF pages</p>
                </div>
                <div class="tool-card" onclick="openTool('watermark')">
                    <i class="fas fa-stamp"></i>
                    <h3>Add Watermark</h3>
                    <p>Add text or image watermark</p>
                </div>
                <div class="tool-card" onclick="openTool('crop')">
                    <i class="fas fa-crop"></i>
                    <h3>Crop PDF</h3>
                    <p>Trim PDF margins</p>
                </div>
            </div>

            <h2 class="section-title">PDF Security</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="openTool('unlock')">
                    <i class="fas fa-unlock"></i>
                    <h3>Unlock PDF</h3>
                    <p>Remove PDF password</p>
                </div>
                <div class="tool-card" onclick="openTool('protect')">
                    <i class="fas fa-lock"></i>
                    <h3>Protect PDF</h3>
                    <p>Add password protection</p>
                </div>
                <div class="tool-card" onclick="openTool('sign')">
                    <i class="fas fa-signature"></i>
                    <h3>Sign PDF</h3>
                    <p>Add digital signature</p>
                </div>
                <div class="tool-card" onclick="openTool('redact')">
                    <i class="fas fa-eraser"></i>
                    <h3>Redact PDF</h3>
                    <p>Permanently remove content</p>
                </div>
            </div>

            <h2 class="section-title">Advanced Tools</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="openTool('compare')">
                    <i class="fas fa-not-equal"></i>
                    <h3>Compare PDF</h3>
                    <p>Highlight differences between PDFs</p>
                </div>
                <div class="tool-card" onclick="openTool('translate')">
                    <i class="fas fa-language"></i>
                    <h3>Translate PDF</h3>
                    <p>Auto-translate PDF content</p>
                </div>
                <div class="tool-card" onclick="openTool('scan')">
                    <i class="fas fa-scanner"></i>
                    <h3>Scan to PDF</h3>
                    <p>Convert scans to PDF</p>
                </div>
            </div>
        </div>
    </div>

    <div id="workspace" class="workspace">
        <div id="uploadArea" class="upload-container">
            <div class="upload-box" onclick="document.getElementById('fileInput').click()">
                <i class="fas fa-cloud-upload-alt"></i>
                <h2 id="uploadTitle">Select PDF file</h2>
                <p>or drop PDF here</p>
                <button class="upload-btn">Select PDF file</button>
                <input type="file" id="fileInput" accept=".pdf,image/*,.docx,.xlsx,.pptx">
            </div>
        </div>

        <div id="editorLayout" class="editor-layout">
            <div class="thumbnail-strip" id="thumbnailStrip"></div>
            <div class="preview-area">
                <div class="preview-controls">
                    <div>
                        <button class="zoom-btn" onclick="zoomOut()"><i class="fas fa-minus"></i></button>
                        <span id="zoomLevel">100%</span>
                        <button class="zoom-btn" onclick="zoomIn()"><i class="fas fa-plus"></i></button>
                    </div>
                    <span id="pageInfo">Page 1 of 1</span>
                </div>
                <div style="text-align: center;">
                    <canvas id="previewCanvas"></canvas>
                </div>
            </div>
            <div class="settings-panel" id="settingsPanel">
                <div class="settings-title" id="settingsTitle">Settings</div>
                <div id="settingsContent"></div>
            </div>
        </div>

        <div id="actionFooter" class="action-footer hidden">
            <div class="action-footer-content">
                <button class="btn-secondary" onclick="resetTool()">Cancel</button>
                <button class="btn-primary" onclick="processPDF()">
                    <i class="fas fa-check"></i> Apply Changes
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="loadingModal">
        <div class="modal-content">
            <i class="fas fa-spinner modal-icon loading"></i>
            <div class="modal-title">Processing...</div>
        </div>
    </div>

    <div class="modal" id="successModal">
        <div class="modal-content">
            <i class="fas fa-check-circle modal-icon success"></i>
            <div class="modal-title">Success!</div>
            <p style="margin: 20px 0;">Your PDF has been processed</p>
            <button class="btn-primary" onclick="downloadPDF()">
                <i class="fas fa-download"></i> Download
            </button>
        </div>
    </div>

    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        
        let currentTool = '';
        let pdfDoc = null;
        let currentPage = 1;
        let scale = 1.5;
        let originalPdfBytes = null;
        let processedPdfBytes = null;
        let selectedFiles = [];

        function showHome() {
            document.getElementById('homeSection').style.display = 'block';
            document.getElementById('workspace').classList.remove('active');
        }

        function openTool(tool) {
            currentTool = tool;
            document.getElementById('homeSection').style.display = 'none';
            document.getElementById('workspace').classList.add('active');
            document.getElementById('uploadTitle').textContent = `Select file for ${tool}`;
            updateSettings(tool);
        }

        function updateSettings(tool) {
            const settings = {
                compress: '<div class="setting-group"><div class="setting-label">Compression Level</div><input type="range" class="setting-input" min="1" max="3" value="2"></div>',
                merge: '<div class="setting-group"><div class="setting-label">Merge Order</div><p style="font-size:13px;color:#5f6368;">Drag files to reorder</p></div>',
                split: '<div class="setting-group"><div class="setting-label">Split Mode</div><select class="setting-input"><option>All pages</option><option>Page range</option><option>Custom</option></select></div>',
                rotate: '<div class="setting-group"><div class="setting-label">Rotation</div><select class="setting-input"><option>90° clockwise</option><option>180°</option><option>270° clockwise</option></select></div>',
                protect: '<div class="setting-group"><div class="setting-label">Password</div><input type="password" class="setting-input" placeholder="Enter password"></div>',
                watermark: '<div class="setting-group"><div class="setting-label">Watermark Text</div><input type="text" class="setting-input" placeholder="Enter text"></div>'
            };
            document.getElementById('settingsContent').innerHTML = settings[tool] || '<p style="color:#5f6368;">No settings available</p>';
        }

        document.getElementById('fileInput').addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;
            
            try {
                if (file.type === 'application/pdf') {
                    originalPdfBytes = await file.arrayBuffer();
                    const loadingTask = pdfjsLib.getDocument({data: originalPdfBytes});
                    pdfDoc = await loadingTask.promise;
                    
                    document.getElementById('uploadArea').classList.add('hidden');
                    document.getElementById('editorLayout').classList.add('active');
                    document.getElementById('actionFooter').classList.remove('hidden');
                    
                    await renderPage(1);
                    await generateThumbnails();
                }
            } catch (error) {
                alert('Error loading file: ' + error.message);
            }
        });

        async function renderPage(pageNum) {
            const page = await pdfDoc.getPage(pageNum);
            const viewport = page.getViewport({scale: scale});
            
            const canvas = document.getElementById('previewCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = viewport.width;
            canvas.height = viewport.height;
            
            await page.render({canvasContext: ctx, viewport: viewport}).promise;
            currentPage = pageNum;
            document.getElementById('pageInfo').textContent = `Page ${pageNum} of ${pdfDoc.numPages}`;
        }

        async function generateThumbnails() {
            const strip = document.getElementById('thumbnailStrip');
            strip.innerHTML = '';
            
            for (let i = 1; i <= Math.min(pdfDoc.numPages, 10); i++) {
                const page = await pdfDoc.getPage(i);
                const viewport = page.getViewport({scale: 0.3});
                
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = viewport.width;
                canvas.height = viewport.height;
                
                await page.render({canvasContext: ctx, viewport: viewport}).promise;
                
                const thumb = document.createElement('div');
                thumb.className = 'thumbnail' + (i === 1 ? ' active' : '');
                thumb.onclick = () => renderPage(i);
                thumb.appendChild(canvas);
                strip.appendChild(thumb);
            }
        }

        function zoomIn() {
            scale += 0.2;
            renderPage(currentPage);
            document.getElementById('zoomLevel').textContent = Math.round(scale * 100) + '%';
        }

        function zoomOut() {
            if (scale > 0.5) {
                scale -= 0.2;
                renderPage(currentPage);
                document.getElementById('zoomLevel').textContent = Math.round(scale * 100) + '%';
            }
        }

        async function processPDF() {
            document.getElementById('loadingModal').classList.add('active');
            
            try {
                const { PDFDocument } = PDFLib;
                const pdfDocLib = await PDFDocument.load(originalPdfBytes);
                
                // Tool-specific processing
                switch(currentTool) {
                    case 'compress':
                        pdfDocLib.setTitle('');
                        pdfDocLib.setAuthor('');
                        break;
                    case 'rotate':
                        const pages = pdfDocLib.getPages();
                        pages.forEach(p => p.setRotation(PDFLib.degrees(90)));
                        break;
                }
                
                processedPdfBytes = await pdfDocLib.save();
                
                document.getElementById('loadingModal').classList.remove('active');
                document.getElementById('successModal').classList.add('active');
            } catch (error) {
                document.getElementById('loadingModal').classList.remove('active');
                alert('Error processing PDF: ' + error.message);
            }
        }

        function downloadPDF() {
            const blob = new Blob([processedPdfBytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${currentTool}-output.pdf`;
            a.click();
            URL.revokeObjectURL(url);
            document.getElementById('successModal').classList.remove('active');
        }

        function resetTool() {
            if (confirm('Cancel and return to home?')) {
                location.reload();
            }
        }
    </script>
</body>
</html>
